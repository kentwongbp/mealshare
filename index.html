<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mealshare MVP</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&family=Georgia&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body style="margin:0; background-color:#1c1917;">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ‚îÄ‚îÄ‚îÄ DESIGN TOKENS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const C = {
          brand: "#D4500A", brandLight: "#FFF0E8", brandMid: "#F07030",
          dark: "#1C1917", mid: "#57534E", light: "#A8A29E",
          surface: "#FFFAF7", card: "#FFFFFF", border: "#EDE8E3",
          green: "#15803D", greenBg: "#DCFCE7", greenBorder: "#86EFAC",
          blue: "#1D4ED8", blueBg: "#EFF6FF", blueBorder: "#BFDBFE",
        };

        const font = { heading: "'Georgia', serif", body: "'Nunito', sans-serif" };

        // ‚îÄ‚îÄ‚îÄ DATA & COMPONENTS (V4 ORIGINAL) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const ZONES = ["Taman Ipoh Timur", "Bercham", "Taman Cempaka", "Greentown", "Falim"];
        const DIETARY_FILTERS = ["All", "Diabetic-Friendly", "Low-Sodium", "Vegetarian", "Halal", "No MSG"];
        const SORT_OPTIONS = ["Distance", "Rating", "Newest"];
        const FPX_BANKS = [
          { id: "maybank2u", name: "Maybank2u", logo: "üè¶" },
          { id: "cimb", name: "CIMB Clicks", logo: "üèõ" },
          { id: "hlb", name: "Hong Leong Connect", logo: "üè¶" },
        ];

        const COOKS = [
          {
            id: 1, name: "Kak Rohani", zone: "Taman Ipoh Timur", distanceKm: 0.3, eta: "12 min", avatar: "üë©‚Äçüç≥",
            cuisine: "Malay Home Cook", story: "Ex-school canteen cook of 18 years.",
            rating: 4.9, reviews: 87, ordersThisWeek: 23, available: true, streak: 41, isTrending: true,
            tags: ["Diabetic-Friendly", "Halal"],
            menu: [{ id: "r1", name: "Masak Lemak Cili Api Ayam", price: 8, emoji: "üçõ", portions: 6, isSpecial: true }],
            reviewsList: [{ name: "Pn. Hafizah", text: "Masak lemak was exactly right!", stars: 5 }]
          },
          {
            id: 2, name: "Uncle Chong", zone: "Bercham", distanceKm: 0.7, eta: "18 min", avatar: "üë®‚Äçüç≥",
            cuisine: "Chinese Home Cook", story: "Retired hawker, 30 years perfecting Ipoh char kway teow.",
            rating: 4.8, reviews: 64, ordersThisWeek: 17, available: true, tags: ["No MSG", "Halal"],
            menu: [{ id: "c1", name: "Char Kway Teow (Dry)", price: 9, emoji: "üçú", portions: 4 }],
            reviewsList: [{ name: "Tan Wei Ming", text: "Best char kway teow!", stars: 5 }]
          }
        ];

        // UI ATOMS
        const Tag = ({ label, color, bg, border }) => (
          <span style={{ background: bg || C.brandLight, color: color || C.brand, border: "1px solid " + (border || C.brandMid), fontSize: 10, fontWeight: 700, padding: "2px 9px", borderRadius: 20, marginRight: 5 }}>{label}</span>
        );

        const Stars = ({ n, size }) => (
          <span>{[1, 2, 3, 4, 5].map(i => <span key={i} style={{ color: i <= n ? C.brand : "#D6D3D1", fontSize: size || 13 }}>‚òÖ</span>)}</span>
        );

        const Btn = ({ children, onClick, variant, style: extra }) => (
          <button onClick={onClick} style={{ border: "none", borderRadius: 16, fontWeight: 800, cursor: "pointer", fontSize: 14, padding: "16px 24px", width: "100%", background: variant === 'secondary' ? C.brandLight : C.brand, color: variant === 'secondary' ? C.brand : "#fff", ...extra }}>{children}</button>
        );

        // --- NEW COOK DASHBOARD VIEW ---
        const CookDashboard = ({ onBack }) => (
          <div style={{ padding: "20px", background: "#fff", minHeight: "100vh", maxWidth: 430, margin: "0 auto", fontFamily: font.body }}>
            <button onClick={onBack} style={{ marginBottom: "20px", background: "#f5f5f4", border: "none", padding: "10px 15px", borderRadius: "10px", fontWeight: "bold" }}>‚Üê Back to App</button>
            <h2 style={{ fontFamily: font.heading, color: C.brand }}>Cook Dashboard</h2>
            <div style={{ background: C.greenBg, padding: "15px", borderRadius: "12px", marginBottom: "15px", border: "1.5px solid " + C.greenBorder }}>
              <strong style={{ color: C.green }}>Active Orders (3)</strong>
              <p style={{ fontSize: "13px", margin: "5px 0 0" }}>Batch Pickup: 6:00 PM</p>
            </div>
            <div style={{ border: "1px solid " + C.border, borderRadius: "12px", padding: "15px" }}>
              <p><strong>Order #1024</strong> - 2x Masak Lemak</p>
              <p style={{ fontSize: "12px", color: C.light }}>üìç Meru Heights Condominium</p>
              <Btn onClick={() => alert('Order Marked Ready')}>Mark Ready</Btn>
            </div>
          </div>
        );

        // --- MAIN APP ---
        function MealshareApp() {
          const [view, setView] = useState('home'); 
          const [neighbourhood, setNeighbourhood] = useState(null);

          if (view === 'dashboard') return <CookDashboard onBack={() => setView('home')} />;
          if (!neighbourhood) return (
            <div style={{ background: C.dark, minHeight: "100vh", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", padding: 20 }}>
               <h1 style={{ color: "white", fontFamily: font.heading }}>Pick your zone</h1>
               {ZONES.map(z => <button key={z} onClick={() => setNeighbourhood(z)} style={{ width: "100%", maxWidth: 300, padding: 15, margin: 5, borderRadius: 10 }}>{z}</button>)}
            </div>
          );

          return (
            <div style={{ maxWidth: 430, margin: "0 auto", background: C.surface, minHeight: "100vh", fontFamily: font.body }}>
              <div style={{ background: "linear-gradient(135deg, #1C1917, #2D2420)", padding: 20 }}>
                <div style={{ color: C.brandMid, fontSize: 10, fontWeight: 900, letterSpacing: 3 }}>MEALSHARE</div>
                <h1 style={{ color: "white", fontFamily: font.heading, margin: 0 }}>Neighbours Near You</h1>
                <p style={{ color: C.light, fontSize: 12 }}>üìç {neighbourhood}</p>
              </div>
              
              <div style={{ padding: 20 }}>
                {COOKS.map(c => (
                  <div key={c.id} style={{ background: "white", borderRadius: 20, padding: 15, border: "1px solid " + C.border, marginBottom: 15 }}>
                    <div style={{ display: "flex", gap: 15 }}>
                       <span style={{ fontSize: 40 }}>{c.avatar}</span>
                       <div>
                          <h3 style={{ margin: 0, fontFamily: font.heading }}>{c.name}</h3>
                          <Stars n={c.rating} />
                       </div>
                    </div>
                  </div>
                ))}
                
                <div style={{ marginTop: 20, background: C.brandLight, padding: 20, borderRadius: 20, textAlign: "center" }}>
                   <p style={{ fontWeight: "bold", color: C.brand }}>Internal: View Cook Management</p>
                   <Btn onClick={() => setView('dashboard')}>Open Cook Dashboard</Btn>
                </div>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MealshareApp />);
    </script>
</body>
</html>
