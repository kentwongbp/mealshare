<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mealshare App</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&family=Georgia&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body style="margin:0; background-color:#1c1917;">
    <div id="root"></div>

    <script type="text/babel">
        // PASTE YOUR JSX CODE BELOW THIS LINE
        import { useState, useEffect, useRef } from "react";

// ‚îÄ‚îÄ‚îÄ DESIGN TOKENS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const C = {
  brand: "#D4500A",
  brandLight: "#FFF0E8",
  brandMid: "#F07030",
  dark: "#1C1917",
  mid: "#57534E",
  light: "#A8A29E",
  surface: "#FFFAF7",
  card: "#FFFFFF",
  border: "#EDE8E3",
  green: "#15803D",
  greenBg: "#DCFCE7",
  greenBorder: "#86EFAC",
  blue: "#1D4ED8",
  blueBg: "#EFF6FF",
  blueBorder: "#BFDBFE",
};

const font = { heading: "'Georgia', 'Times New Roman', serif", body: "'Nunito', 'Segoe UI', sans-serif" };

// ‚îÄ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const ZONES = ["Taman Ipoh Timur", "Bercham", "Taman Cempaka", "Greentown", "Falim"];
const DIETARY_FILTERS = ["All", "Diabetic-Friendly", "Low-Sodium", "Vegetarian", "Halal", "No MSG"];
const SORT_OPTIONS = ["Distance", "Rating", "Newest"];
const FPX_BANKS = [
  { id: "maybank2u", name: "Maybank2u", logo: "üè¶" },
  { id: "cimb", name: "CIMB Clicks", logo: "üèõ" },
  { id: "hlb", name: "Hong Leong Connect", logo: "üè¶" },
  { id: "rhb", name: "RHB Now", logo: "üèõ" },
  { id: "publicbank", name: "Public Bank", logo: "üè¶" },
  { id: "ambank", name: "AmBank", logo: "üèõ" },
];

const COOKS = [
  {
    id: 1, name: "Kak Rohani", zone: "Taman Ipoh Timur", distanceKm: 0.3, eta: "12 min", avatar: "üë©‚Äçüç≥",
    cuisine: "Malay Home Cook",
    story: "Ex-school canteen cook of 18 years. My Masak Lemak Cili Api is the reason my neighbours skip the mamak.",
    rating: 4.9, reviews: 87, ordersThisWeek: 23, available: true, streak: 41, isNew: false, isTrending: true,
    tags: ["Diabetic-Friendly", "Low-Sodium", "Halal"],
    menu: [
      { id: "r1", name: "Masak Lemak Cili Api Ayam", price: 8, emoji: "üçõ", portions: 6, isSpecial: true },
      { id: "r2", name: "Sayur Lodeh", price: 5, emoji: "ü•ò", portions: 8, isSpecial: false },
      { id: "r3", name: "Sambal Belacan Telur", price: 6, emoji: "üç≥", portions: 5, isSpecial: false },
      { id: "r4", name: "Sup Tulang", price: 4, emoji: "üç≤", portions: 10, isSpecial: false },
    ],
    reviewsList: [
      { name: "Pn. Hafizah", text: "Masak lemak was exactly right for my husband's diet. No compromise on taste!", stars: 5 },
      { name: "Sarah L.", text: "Soup was incredible. Already ordered 3 times this week.", stars: 5 },
    ],
  },
  {
    id: 2, name: "Uncle Chong", zone: "Bercham", distanceKm: 0.7, eta: "18 min", avatar: "üë®‚Äçüç≥",
    cuisine: "Chinese Home Cook",
    story: "Retired hawker, 30 years perfecting Ipoh char kway teow. Now cooking for my street ‚Äî no secret ingredients withheld.",
    rating: 4.8, reviews: 64, ordersThisWeek: 17, available: true, streak: 28, isNew: false, isTrending: false,
    tags: ["No MSG", "Halal"],
    menu: [
      { id: "c1", name: "Char Kway Teow (Dry)", price: 9, emoji: "üçú", portions: 4, isSpecial: false },
      { id: "c2", name: "Steamed Pomfret and Ginger", price: 12, emoji: "üêü", portions: 3, isSpecial: false },
      { id: "c3", name: "Braised Pork Trotters", price: 10, emoji: "üçñ", portions: 5, isSpecial: false },
      { id: "c4", name: "Lotus Root Soup", price: 4, emoji: "üçµ", portions: 8, isSpecial: false },
    ],
    reviewsList: [
      { name: "Tan Wei Ming", text: "Best char kway teow since the old Gerbang Malam stall.", stars: 5 },
    ],
  },
  {
    id: 3, name: "Pn. Selvam", zone: "Taman Cempaka", distanceKm: 1.1, eta: "22 min", avatar: "üë©‚Äçüç≥",
    cuisine: "South Indian Home Cook",
    story: "My banana leaf thali has been the family Sunday ritual for 20 years. Now sharing the recipes with the neighbourhood.",
    rating: 4.7, reviews: 51, ordersThisWeek: 14, available: true, streak: 15, isNew: true, isTrending: false,
    tags: ["Vegetarian", "Diabetic-Friendly", "No MSG"],
    menu: [
      { id: "s1", name: "Veg Banana Leaf Thali", price: 11, emoji: "üç±", portions: 6, isSpecial: true },
      { id: "s2", name: "Rasam Rice", price: 6, emoji: "ü•£", portions: 8, isSpecial: false },
      { id: "s3", name: "Aloo Gobi Masala", price: 7, emoji: "ü•î", portions: 7, isSpecial: false },
      { id: "s4", name: "Rasam Soup", price: 3, emoji: "ü´ô", portions: 10, isSpecial: false },
    ],
    reviewsList: [
      { name: "Rajes N.", text: "Finally a proper vegetarian option in this area. The thali is outstanding.", stars: 5 },
    ],
  },
  {
    id: 4, name: "Mak Long Zaitun", zone: "Greentown", distanceKm: 1.4, eta: "26 min", avatar: "üë©‚Äçüç≥",
    cuisine: "Traditional Perak Malay",
    story: "No shortcuts, no MSG ‚Äî just my grandmother's recipes from Kuala Kangsar, passed down exactly as she taught me.",
    rating: 5.0, reviews: 112, ordersThisWeek: 31, available: false, streak: 63, isNew: false, isTrending: false,
    tags: ["Diabetic-Friendly", "Low-Sodium", "No MSG", "Halal"],
    menu: [
      { id: "z1", name: "Gulai Tempoyak Ikan Patin", price: 10, emoji: "üê†", portions: 0, isSpecial: false },
      { id: "z2", name: "Ulam-ulaman and Sambal", price: 7, emoji: "ü•ó", portions: 0, isSpecial: false },
      { id: "z3", name: "Pucuk Paku Goreng", price: 5, emoji: "üåø", portions: 0, isSpecial: false },
      { id: "z4", name: "Sup Ikan Jenahak", price: 4, emoji: "üç≤", portions: 0, isSpecial: false },
    ],
    reviewsList: [
      { name: "Azman R.", text: "The best home cook in Ipoh. Period. The tempoyak is legendary.", stars: 5 },
      { name: "Fatimah S.", text: "My kids refuse to eat anyone else's food now.", stars: 5 },
    ],
  },
  {
    id: 5, name: "Ah Lian", zone: "Falim", distanceKm: 1.8, eta: "30 min", avatar: "üë©‚Äçüç≥",
    cuisine: "Hakka Chinese",
    story: "My braised pork belly recipe is 3 generations old. Hakka cooking is comfort food ‚Äî filling, honest, and made with heart.",
    rating: 4.6, reviews: 38, ordersThisWeek: 9, available: true, streak: 8, isNew: true, isTrending: false,
    tags: ["No MSG"],
    menu: [
      { id: "a1", name: "Char Yuk Braised Pork Belly", price: 11, emoji: "ü•©", portions: 5, isSpecial: true },
      { id: "a2", name: "Stuffed Tofu Yong Tau Foo", price: 8, emoji: "ü´ò", portions: 7, isSpecial: false },
      { id: "a3", name: "Bitter Gourd with Egg", price: 6, emoji: "ü•ö", portions: 6, isSpecial: false },
      { id: "a4", name: "Watercress Soup", price: 4, emoji: "üçµ", portions: 9, isSpecial: false },
    ],
    reviewsList: [
      { name: "David C.", text: "Char yuk is the real deal. Absolutely melt in your mouth.", stars: 5 },
    ],
  },
];

// ‚îÄ‚îÄ‚îÄ TINY ATOMS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const Tag = ({ label, color, bg, border }) => (
  <span style={{ background: bg || C.brandLight, color: color || C.brand, border: "1px solid " + (border || C.brandMid), fontSize: 10, fontWeight: 700, padding: "2px 9px", borderRadius: 20, whiteSpace: "nowrap", display: "inline-block" }}>{label}</span>
);

const Stars = ({ n, size, interactive, onRate }) => (
  <span style={{ fontSize: size || 13, cursor: interactive ? "pointer" : "default" }}>
    {[1, 2, 3, 4, 5].map(i => (
      <span key={i} onClick={() => interactive && onRate && onRate(i)} style={{ color: i <= n ? C.brand : "#D6D3D1", fontSize: size || 13 }}>‚òÖ</span>
    ))}
  </span>
);

const Btn = ({ children, onClick, variant, style: extra }) => {
  const base = { border: "none", borderRadius: 16, fontWeight: 800, cursor: "pointer", fontSize: 14, fontFamily: font.body, transition: "opacity 0.15s", ...extra };
  const styles = {
    primary: { ...base, background: C.brand, color: "#fff", padding: "16px 24px", width: "100%", boxShadow: "0 4px 20px rgba(212,80,10,0.30)" },
    secondary: { ...base, background: C.brandLight, color: C.brand, padding: "12px 20px", width: "100%" },
    ghost: { ...base, background: "transparent", color: C.mid, padding: "8px 16px", border: "1.5px solid " + C.border },
    green: { ...base, background: "#15803D", color: "#fff", padding: "16px 24px", width: "100%", boxShadow: "0 4px 20px rgba(21,128,61,0.25)" },
  };
  return <button onClick={onClick} style={styles[variant || "primary"]}>{children}</button>;
};

const Divider = () => <div style={{ height: 1, background: C.border, margin: "16px 0" }} />;

const Sheet = ({ children, onClose }) => (
  <div style={{ position: "fixed", inset: 0, background: "rgba(28,25,23,0.6)", zIndex: 800, display: "flex", alignItems: "flex-end", justifyContent: "center" }} onClick={onClose}>
    <div onClick={e => e.stopPropagation()} style={{ background: C.surface, borderRadius: "24px 24px 0 0", width: "100%", maxWidth: 430, maxHeight: "92vh", overflowY: "auto", paddingBottom: 32 }}>
      {children}
    </div>
  </div>
);

// ‚îÄ‚îÄ‚îÄ ZONE PICKER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const ZonePicker = ({ onSelect }) => (
  <div style={{ position: "fixed", inset: 0, background: C.dark, zIndex: 1000, display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", padding: "0 24px" }}>
    <div style={{ fontFamily: font.heading, fontSize: 13, color: C.brandMid, letterSpacing: 4, textTransform: "uppercase", marginBottom: 12 }}>Mealshare</div>
    <div style={{ fontFamily: font.heading, fontSize: 28, color: "#fff", textAlign: "center", lineHeight: 1.3, marginBottom: 10 }}>Which neighbourhood<br />are you in?</div>
    <div style={{ fontSize: 14, color: C.light, textAlign: "center", marginBottom: 36 }}>We show you home cooks nearby. Change anytime.</div>
    <div style={{ width: "100%", maxWidth: 380, display: "flex", flexDirection: "column", gap: 10 }}>
      {ZONES.map(z => (
        <button key={z} onClick={() => onSelect(z)} style={{ background: "rgba(255,255,255,0.07)", border: "1px solid rgba(255,255,255,0.12)", borderRadius: 16, padding: "15px 20px", color: "#fff", fontSize: 15, fontWeight: 700, cursor: "pointer", textAlign: "left", display: "flex", justifyContent: "space-between", alignItems: "center", fontFamily: font.body }}>
          <span>{"üìç " + z}</span>
          <span style={{ color: C.brandMid, fontSize: 20 }}>‚Ä∫</span>
        </button>
      ))}
    </div>
  </div>
);

// ‚îÄ‚îÄ‚îÄ COOK CARD (feed) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const CookCard = ({ cook, onTap, isSaved, onSave }) => (
  <button onClick={() => onTap(cook)} style={{ width: "100%", background: C.card, borderRadius: 20, border: "1px solid " + C.border, marginBottom: 14, overflow: "hidden", cursor: "pointer", textAlign: "left", display: "block", boxShadow: cook.available ? "0 2px 16px rgba(212,80,10,0.06)" : "none", opacity: cook.available ? 1 : 0.68 }}>
    <div style={{ background: cook.available ? "linear-gradient(135deg, #1C1917, #2D2420)" : "#F5F5F4", padding: "14px 16px 12px", display: "flex", gap: 12, alignItems: "center" }}>
      <div style={{ fontSize: 40, background: "rgba(255,255,255,0.08)", borderRadius: 14, width: 56, height: 56, display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>{cook.avatar}</div>
      <div style={{ flex: 1 }}>
        <div style={{ fontSize: 16, fontWeight: 800, fontFamily: font.heading, color: cook.available ? "#fff" : C.dark, letterSpacing: -0.3 }}>{cook.name}</div>
        <div style={{ fontSize: 11, color: cook.available ? "#A8A29E" : C.light, marginTop: 1 }}>{cook.cuisine}</div>
        <div style={{ fontSize: 11, color: cook.available ? "#78716C" : "#C4B5AC", marginTop: 2 }}>{"üìç " + cook.distanceKm + " km  ¬∑  üõµ " + cook.eta}</div>
      </div>
      <div style={{ display: "flex", flexDirection: "column", alignItems: "flex-end", gap: 4 }}>
        <div style={{ fontSize: 15, fontWeight: 900, color: C.brand }}>{"‚òÖ " + cook.rating}</div>
        <button onClick={e => { e.stopPropagation(); onSave(cook.id, cook.name); }} style={{ background: "none", border: "none", fontSize: 18, cursor: "pointer", padding: 0 }}>{isSaved ? "‚≠ê" : "‚òÜ"}</button>
      </div>
    </div>
    <div style={{ padding: "7px 14px", borderBottom: "1px solid " + C.border, display: "flex", gap: 5, flexWrap: "wrap" }}>
      {cook.available ? <Tag label="‚óè Open Today" color={C.green} bg={C.greenBg} border={C.greenBorder} /> : <Tag label="Resting Today" color={C.mid} bg="#F5F5F4" border={C.border} />}
      {cook.isTrending && <Tag label="üî• Trending" color="#92400E" bg="#FEF3C7" border="#FCD34D" />}
      {cook.isNew && <Tag label="‚ú® New Cook" color="#5B21B6" bg="#EDE9FE" border="#C4B5FD" />}
      {cook.streak >= 30 && <Tag label={cook.streak + "d Streak"} color={C.green} bg={C.greenBg} border={C.greenBorder} />}
      <Tag label={cook.ordersThisWeek + " neighbours this week"} color={C.blue} bg={C.blueBg} border={C.blueBorder} />
    </div>
    <div style={{ padding: "7px 14px", display: "flex", gap: 5, flexWrap: "wrap", borderBottom: cook.available ? "1px solid " + C.border : "none" }}>
      {cook.tags.map(t => <Tag key={t} label={t} />)}
    </div>
    {cook.available && (
      <div style={{ padding: "10px 14px 14px" }}>
        <div style={{ fontSize: 10, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 7 }}>TODAY'S MENU</div>
        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 7 }}>
          {cook.menu.slice(0, 4).map(d => (
            <div key={d.id} style={{ background: d.isSpecial ? C.brandLight : "#FAFAF9", borderRadius: 12, padding: "8px 10px", border: "1px solid " + (d.isSpecial ? "#FDDCC4" : C.border), position: "relative" }}>
              {d.isSpecial && <div style={{ position: "absolute", top: 5, right: 6, fontSize: 8, fontWeight: 800, color: C.brand }}>SPECIAL</div>}
              <div style={{ fontSize: 20 }}>{d.emoji}</div>
              <div style={{ fontSize: 10, fontWeight: 700, color: C.dark, marginTop: 3, lineHeight: 1.3 }}>{d.name}</div>
              <div style={{ fontSize: 12, fontWeight: 900, color: C.brand, marginTop: 3 }}>{"RM " + d.price}</div>
              <div style={{ fontSize: 9, color: C.light }}>{d.portions + " left"}</div>
            </div>
          ))}
        </div>
      </div>
    )}
  </button>
);

// ‚îÄ‚îÄ‚îÄ ORDER BUILDER (dish selection inside profile) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const OrderBuilder = ({ cook, cart, onAdd, onRemove }) => {
  const total = cart.reduce((s, i) => s + i.price * i.qty, 0);
  const itemCount = cart.reduce((s, i) => s + i.qty, 0);
  return (
    <div>
      {cook.menu.map(dish => {
        const inCart = cart.find(i => i.id === dish.id);
        const qty = inCart ? inCart.qty : 0;
        const unavail = dish.portions === 0;
        return (
          <div key={dish.id} style={{ background: C.card, borderRadius: 14, padding: "12px 14px", marginBottom: 8, border: "1px solid " + (dish.isSpecial ? "#FDDCC4" : C.border), display: "flex", alignItems: "center", gap: 12, opacity: unavail ? 0.4 : 1 }}>
            <span style={{ fontSize: 28, flexShrink: 0 }}>{dish.emoji}</span>
            <div style={{ flex: 1 }}>
              <div style={{ fontSize: 13, fontWeight: 700, color: C.dark, display: "flex", gap: 5, alignItems: "center", flexWrap: "wrap" }}>
                {dish.name}
                {dish.isSpecial && <span style={{ fontSize: 9, background: C.brandLight, color: C.brand, border: "1px solid #FDDCC4", borderRadius: 10, padding: "1px 6px", fontWeight: 800 }}>SPECIAL</span>}
              </div>
              <div style={{ fontSize: 11, color: unavail ? "#EF4444" : C.green }}>{unavail ? "Sold out today" : dish.portions + " portions left"}</div>
            </div>
            <div style={{ display: "flex", flexDirection: "column", alignItems: "flex-end", gap: 6, flexShrink: 0 }}>
              <div style={{ fontSize: 15, fontWeight: 900, color: C.brand }}>{"RM " + dish.price}</div>
              {!unavail && (
                <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
                  {qty > 0 && (
                    <>
                      <button onClick={() => onRemove(dish)} style={{ width: 28, height: 28, borderRadius: 10, border: "1.5px solid " + C.border, background: "#fff", fontSize: 16, fontWeight: 700, cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", color: C.mid }}>‚àí</button>
                      <span style={{ fontSize: 14, fontWeight: 800, color: C.dark, minWidth: 16, textAlign: "center" }}>{qty}</span>
                    </>
                  )}
                  <button onClick={() => onAdd(dish)} style={{ width: 28, height: 28, borderRadius: 10, border: "none", background: C.brand, fontSize: 16, fontWeight: 700, cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", color: "#fff" }}>+</button>
                </div>
              )}
            </div>
          </div>
        );
      })}
      {itemCount > 0 && (
        <div style={{ position: "sticky", bottom: 0, marginTop: 8, padding: "0 0 8px" }}>
          <div style={{ background: C.brand, borderRadius: 16, padding: "14px 20px", display: "flex", justifyContent: "space-between", alignItems: "center", boxShadow: "0 4px 24px rgba(212,80,10,0.35)" }}>
            <div>
              <div style={{ fontSize: 12, color: "rgba(255,255,255,0.7)", fontWeight: 600 }}>{itemCount + " item" + (itemCount > 1 ? "s" : "")}</div>
              <div style={{ fontSize: 18, fontWeight: 900, color: "#fff", fontFamily: font.heading }}>{"RM " + total.toFixed(2)}</div>
            </div>
            <div style={{ fontSize: 13, fontWeight: 800, color: "#fff", background: "rgba(255,255,255,0.2)", padding: "8px 16px", borderRadius: 12 }}>Review Order ‚Üí</div>
          </div>
        </div>
      )}
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ CHECKOUT SCREEN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const Checkout = ({ cook, cart, walletCredit, onBack, onPaymentSuccess }) => {
  const [address, setAddress] = useState("14 Jalan Kenanga, Taman Ipoh Timur");
  const [notes, setNotes] = useState("");
  const [payMethod, setPayMethod] = useState("fpx");
  const [selectedBank, setSelectedBank] = useState(null);
  const [step, setStep] = useState("summary"); // summary | fpx | processing | done
  const [useWallet, setUseWallet] = useState(false);

  const itemTotal = cart.reduce((s, i) => s + i.price * i.qty, 0);
  const delivery = 3.50;
  const walletDiscount = useWallet ? Math.min(walletCredit, itemTotal + delivery) : 0;
  const grandTotal = Math.max(0, itemTotal + delivery - walletDiscount);
  const itemCount = cart.reduce((s, i) => s + i.qty, 0);

  if (step === "processing") {
    return (
      <div style={{ display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", minHeight: "80vh", padding: 32, textAlign: "center" }}>
        <div style={{ fontSize: 56, marginBottom: 16, animation: "spin 1s linear infinite" }}>‚è≥</div>
        <style>{`@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }`}</style>
        <div style={{ fontFamily: font.heading, fontSize: 22, color: C.dark, marginBottom: 8 }}>Processing Payment</div>
        <div style={{ fontSize: 14, color: C.light }}>Connecting to your bank securely‚Ä¶</div>
      </div>
    );
  }

  if (step === "done") {
    return (
      <div style={{ display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", minHeight: "80vh", padding: 32, textAlign: "center" }}>
        <div style={{ width: 80, height: 80, background: C.greenBg, borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 40, marginBottom: 20 }}>‚úÖ</div>
        <div style={{ fontFamily: font.heading, fontSize: 26, color: C.dark, marginBottom: 8 }}>Order Placed!</div>
        <div style={{ fontSize: 14, color: C.mid, lineHeight: 1.6, marginBottom: 6 }}>{"RM " + grandTotal.toFixed(2) + " paid ¬∑ " + cook.name + " is preparing your food"}</div>
        <div style={{ fontSize: 13, color: C.light, marginBottom: 32 }}>{"Estimated delivery: " + cook.eta}</div>
        <Btn onClick={onPaymentSuccess} variant="primary">Track My Order</Btn>
      </div>
    );
  }

  if (step === "fpx") {
    return (
      <div style={{ padding: "0 20px 40px" }}>
        <div style={{ padding: "20px 0 10px", display: "flex", alignItems: "center", gap: 12 }}>
          <button onClick={() => setStep("summary")} style={{ background: "none", border: "none", fontSize: 20, cursor: "pointer", color: C.mid }}>‚Äπ</button>
          <div style={{ fontFamily: font.heading, fontSize: 20, color: C.dark }}>Choose Your Bank</div>
        </div>
        <div style={{ background: C.brandLight, borderRadius: 14, padding: "10px 14px", marginBottom: 20, display: "flex", justifyContent: "space-between" }}>
          <span style={{ fontSize: 13, color: C.mid }}>Amount to pay</span>
          <span style={{ fontSize: 15, fontWeight: 900, color: C.brand }}>{"RM " + grandTotal.toFixed(2)}</span>
        </div>
        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10, marginBottom: 24 }}>
          {FPX_BANKS.map(b => (
            <button key={b.id} onClick={() => setSelectedBank(b.id)} style={{ background: selectedBank === b.id ? C.brandLight : C.card, border: "1.5px solid " + (selectedBank === b.id ? C.brand : C.border), borderRadius: 14, padding: "14px 12px", cursor: "pointer", textAlign: "left", display: "flex", gap: 10, alignItems: "center" }}>
              <span style={{ fontSize: 22 }}>{b.logo}</span>
              <span style={{ fontSize: 12, fontWeight: 700, color: selectedBank === b.id ? C.brand : C.dark, lineHeight: 1.3 }}>{b.name}</span>
            </button>
          ))}
        </div>
        <Btn onClick={() => { if (selectedBank) { setStep("processing"); setTimeout(() => setStep("done"), 2200); } }} variant="primary" style={{ opacity: selectedBank ? 1 : 0.4 }}>
          {"Pay RM " + grandTotal.toFixed(2) + " via FPX"}
        </Btn>
        <div style={{ textAlign: "center", fontSize: 11, color: C.light, marginTop: 12 }}>üîí Secured by Billplz ¬∑ Your bank credentials are never stored</div>
      </div>
    );
  }

  return (
    <div style={{ padding: "0 20px 40px" }}>
      <div style={{ padding: "20px 0 14px", display: "flex", alignItems: "center", gap: 12 }}>
        <button onClick={onBack} style={{ background: "none", border: "none", fontSize: 20, cursor: "pointer", color: C.mid }}>‚Äπ</button>
        <div style={{ fontFamily: font.heading, fontSize: 20, color: C.dark }}>Review Order</div>
      </div>

      {/* Cook */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "12px 14px", marginBottom: 14, display: "flex", gap: 12, alignItems: "center" }}>
        <span style={{ fontSize: 32 }}>{cook.avatar}</span>
        <div>
          <div style={{ fontWeight: 800, fontSize: 14, color: C.dark }}>{cook.name}</div>
          <div style={{ fontSize: 12, color: C.light }}>{cook.cuisine + " ¬∑ " + cook.distanceKm + " km"}</div>
        </div>
      </div>

      {/* Items */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "12px 14px", marginBottom: 14 }}>
        <div style={{ fontSize: 11, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>YOUR ORDER</div>
        {cart.map(item => (
          <div key={item.id} style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 8 }}>
            <div style={{ display: "flex", gap: 8, alignItems: "center" }}>
              <span style={{ fontSize: 16 }}>{item.emoji}</span>
              <span style={{ fontSize: 13, color: C.dark, fontWeight: 600 }}>{item.qty + "√ó " + item.name}</span>
            </div>
            <span style={{ fontSize: 13, fontWeight: 800, color: C.dark }}>{"RM " + (item.price * item.qty).toFixed(2)}</span>
          </div>
        ))}
      </div>

      {/* Address */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "12px 14px", marginBottom: 14 }}>
        <div style={{ fontSize: 11, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 8 }}>DELIVERY ADDRESS</div>
        <input value={address} onChange={e => setAddress(e.target.value)} style={{ width: "100%", border: "1.5px solid " + C.border, borderRadius: 10, padding: "10px 12px", fontSize: 13, color: C.dark, background: C.surface, boxSizing: "border-box", fontFamily: font.body }} />
        <div style={{ fontSize: 11, color: C.light, marginTop: 6 }}>{"üõµ Estimated delivery: " + cook.eta}</div>
      </div>

      {/* Notes */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "12px 14px", marginBottom: 14 }}>
        <div style={{ fontSize: 11, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 8 }}>NOTES FOR COOK (optional)</div>
        <textarea value={notes} onChange={e => setNotes(e.target.value)} placeholder="e.g. Less spicy please, no onions, extra gravy" rows={2} style={{ width: "100%", border: "1.5px solid " + C.border, borderRadius: 10, padding: "10px 12px", fontSize: 13, color: C.dark, background: C.surface, resize: "none", boxSizing: "border-box", fontFamily: font.body }} />
      </div>

      {/* Wallet credit */}
      {walletCredit > 0 && (
        <div onClick={() => setUseWallet(!useWallet)} style={{ background: useWallet ? C.greenBg : C.card, borderRadius: 16, border: "1.5px solid " + (useWallet ? C.greenBorder : C.border), padding: "12px 14px", marginBottom: 14, display: "flex", justifyContent: "space-between", alignItems: "center", cursor: "pointer" }}>
          <div>
            <div style={{ fontSize: 13, fontWeight: 800, color: useWallet ? C.green : C.dark }}>{"üíö Wallet Credit: RM " + walletCredit.toFixed(2)}</div>
            <div style={{ fontSize: 11, color: C.light }}>From container returns + referrals</div>
          </div>
          <div style={{ width: 22, height: 22, borderRadius: "50%", background: useWallet ? C.green : "transparent", border: "2px solid " + (useWallet ? C.green : C.border), display: "flex", alignItems: "center", justifyContent: "center", fontSize: 12, color: "#fff" }}>{useWallet ? "‚úì" : ""}</div>
        </div>
      )}

      {/* Payment method */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "12px 14px", marginBottom: 14 }}>
        <div style={{ fontSize: 11, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>PAYMENT METHOD</div>
        {[{ id: "fpx", label: "FPX Online Banking", icon: "üè¶", sub: "Instant bank transfer" }, { id: "duitnow", label: "DuitNow QR", icon: "üì±", sub: "Scan with any banking app" }].map(m => (
          <button key={m.id} onClick={() => setPayMethod(m.id)} style={{ width: "100%", background: payMethod === m.id ? C.brandLight : "transparent", border: "1.5px solid " + (payMethod === m.id ? C.brand : C.border), borderRadius: 12, padding: "10px 14px", cursor: "pointer", display: "flex", gap: 12, alignItems: "center", marginBottom: 8 }}>
            <span style={{ fontSize: 22 }}>{m.icon}</span>
            <div style={{ textAlign: "left" }}>
              <div style={{ fontSize: 13, fontWeight: 700, color: payMethod === m.id ? C.brand : C.dark }}>{m.label}</div>
              <div style={{ fontSize: 11, color: C.light }}>{m.sub}</div>
            </div>
            <div style={{ marginLeft: "auto", width: 18, height: 18, borderRadius: "50%", background: payMethod === m.id ? C.brand : "transparent", border: "2px solid " + (payMethod === m.id ? C.brand : C.border), flexShrink: 0 }} />
          </button>
        ))}
      </div>

      {/* Total */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "12px 14px", marginBottom: 20 }}>
        <div style={{ fontSize: 11, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>ORDER TOTAL</div>
        {[["Food subtotal", "RM " + itemTotal.toFixed(2)], ["Delivery", "RM " + delivery.toFixed(2)], ...(walletDiscount > 0 ? [["Wallet credit", "‚àíRM " + walletDiscount.toFixed(2)]] : [])].map(([k, v], i) => (
          <div key={i} style={{ display: "flex", justifyContent: "space-between", marginBottom: 6, fontSize: 13, color: k === "Wallet credit" ? C.green : C.mid }}><span>{k}</span><span style={{ fontWeight: 700 }}>{v}</span></div>
        ))}
        <Divider />
        <div style={{ display: "flex", justifyContent: "space-between", fontSize: 16, fontWeight: 900, color: C.dark, fontFamily: font.heading }}>
          <span>Total</span><span style={{ color: C.brand }}>{"RM " + grandTotal.toFixed(2)}</span>
        </div>
      </div>

      <Btn onClick={() => payMethod === "fpx" ? setStep("fpx") : setStep("fpx")} variant="primary">
        {"Pay RM " + grandTotal.toFixed(2) + " ‚Üí"}
      </Btn>
      <div style={{ textAlign: "center", fontSize: 11, color: C.light, marginTop: 10 }}>üîí Secured by Billplz ¬∑ No payment until you confirm</div>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ ORDER TRACKING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const TrackingScreen = ({ order, onReviewReady }) => {
  const STEPS = [
    { label: "Order Confirmed", icon: "‚úÖ", detail: "Kak Rohani received your order" },
    { label: "Preparing", icon: "üë©‚Äçüç≥", detail: "Cook is preparing your food now" },
    { label: "Runner Picked Up", icon: "üõµ", detail: "Ahmad picked up your order" },
    { label: "On the Way", icon: "üìç", detail: "3 minutes from your door" },
    { label: "Delivered", icon: "üè°", detail: "Enjoy your meal!" },
  ];
  const [currentStep, setCurrentStep] = useState(0);
  const [showReview, setShowReview] = useState(false);

  useEffect(() => {
    if (currentStep >= STEPS.length - 1) return;
    const t = setTimeout(() => setCurrentStep(s => s + 1), currentStep === 0 ? 800 : currentStep === 1 ? 2000 : 1500);
    return () => clearTimeout(t);
  }, [currentStep]);

  useEffect(() => {
    if (currentStep === STEPS.length - 1) {
      setTimeout(() => setShowReview(true), 1200);
    }
  }, [currentStep]);

  const progress = ((currentStep) / (STEPS.length - 1)) * 100;

  return (
    <div style={{ padding: "20px 20px 40px" }}>
      {/* Header */}
      <div style={{ background: "linear-gradient(135deg, #1C1917, #2D2420)", borderRadius: 20, padding: "20px 18px", marginBottom: 20 }}>
        <div style={{ fontSize: 11, color: C.light, fontWeight: 700, letterSpacing: 1.5, marginBottom: 4 }}>ORDER #MS-{order.id.toString().padStart(4, "0")}</div>
        <div style={{ fontFamily: font.heading, fontSize: 22, color: "#fff", marginBottom: 4 }}>{STEPS[currentStep].icon + " " + STEPS[currentStep].label}</div>
        <div style={{ fontSize: 13, color: "#A8A29E" }}>{STEPS[currentStep].detail}</div>
        <div style={{ marginTop: 16, background: "rgba(255,255,255,0.1)", borderRadius: 10, height: 6, overflow: "hidden" }}>
          <div style={{ height: "100%", background: C.brandMid, borderRadius: 10, width: progress + "%", transition: "width 0.8s ease" }} />
        </div>
        <div style={{ fontSize: 11, color: C.light, marginTop: 6, textAlign: "right" }}>
          {currentStep < STEPS.length - 1 ? "Estimated arrival: " + order.eta : "Delivered just now"}
        </div>
      </div>

      {/* Steps */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "14px 16px", marginBottom: 16 }}>
        {STEPS.map((s, i) => (
          <div key={i} style={{ display: "flex", gap: 14, alignItems: "flex-start", marginBottom: i < STEPS.length - 1 ? 16 : 0, opacity: i > currentStep ? 0.3 : 1, transition: "opacity 0.4s" }}>
            <div style={{ width: 32, height: 32, borderRadius: "50%", background: i <= currentStep ? C.brand : C.border, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 14, flexShrink: 0, transition: "background 0.4s" }}>
              {i < currentStep ? "‚úì" : s.icon}
            </div>
            <div style={{ flex: 1, paddingTop: 4 }}>
              <div style={{ fontSize: 13, fontWeight: 700, color: i <= currentStep ? C.dark : C.light }}>{s.label}</div>
              {i === currentStep && <div style={{ fontSize: 11, color: C.mid, marginTop: 2 }}>{s.detail}</div>}
            </div>
          </div>
        ))}
      </div>

      {/* Order summary */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "14px 16px", marginBottom: 16 }}>
        <div style={{ fontSize: 11, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>YOUR ORDER</div>
        {order.cart.map(item => (
          <div key={item.id} style={{ display: "flex", justifyContent: "space-between", marginBottom: 6, fontSize: 13 }}>
            <span style={{ color: C.mid }}>{item.qty + "√ó " + item.name}</span>
            <span style={{ fontWeight: 700, color: C.dark }}>{"RM " + (item.price * item.qty).toFixed(2)}</span>
          </div>
        ))}
        <Divider />
        <div style={{ display: "flex", justifyContent: "space-between", fontSize: 14, fontWeight: 900, color: C.dark }}>
          <span>Total paid</span>
          <span style={{ color: C.brand }}>{"RM " + order.total.toFixed(2)}</span>
        </div>
      </div>

      {/* Runner info */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "14px 16px" }}>
        <div style={{ fontSize: 11, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>YOUR RUNNER</div>
        <div style={{ display: "flex", gap: 12, alignItems: "center" }}>
          <div style={{ fontSize: 36, background: "#EDE9FE", borderRadius: 12, width: 50, height: 50, display: "flex", alignItems: "center", justifyContent: "center" }}>üõµ</div>
          <div style={{ flex: 1 }}>
            <div style={{ fontWeight: 800, fontSize: 14, color: C.dark }}>Ahmad Faizal</div>
            <div style={{ fontSize: 12, color: C.light }}>Neighbourhood runner ¬∑ 4.9 ‚òÖ</div>
          </div>
          <a href="tel:+601112345678" style={{ background: C.brandLight, border: "none", borderRadius: 12, padding: "8px 14px", fontSize: 13, fontWeight: 700, color: C.brand, textDecoration: "none" }}>Call</a>
        </div>
      </div>

      {/* Review prompt */}
      {showReview && (
        <div style={{ marginTop: 16, background: C.greenBg, borderRadius: 16, border: "1px solid " + C.greenBorder, padding: "16px", textAlign: "center" }}>
          <div style={{ fontSize: 28, marginBottom: 6 }}>üéâ</div>
          <div style={{ fontFamily: font.heading, fontSize: 18, color: C.dark, marginBottom: 4 }}>Your food has arrived!</div>
          <div style={{ fontSize: 13, color: C.mid, marginBottom: 14 }}>How was your meal from {order.cookName}?</div>
          <Btn onClick={onReviewReady} variant="primary">Leave a Review</Btn>
        </div>
      )}
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ REVIEW SCREEN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const ReviewScreen = ({ order, onDone }) => {
  const [stars, setStars] = useState(0);
  const [text, setText] = useState("");
  const [matchesPhoto, setMatchesPhoto] = useState(null);
  const [dietaryAccurate, setDietaryAccurate] = useState(null);
  const [submitted, setSubmitted] = useState(false);
  const [creditEarned] = useState(1.00);

  if (submitted) {
    return (
      <div style={{ display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", minHeight: "70vh", padding: 32, textAlign: "center" }}>
        <div style={{ fontSize: 56, marginBottom: 16 }}>üôè</div>
        <div style={{ fontFamily: font.heading, fontSize: 24, color: C.dark, marginBottom: 8 }}>Thank you!</div>
        <div style={{ fontSize: 14, color: C.mid, lineHeight: 1.7, marginBottom: 8 }}>Your review helps your neighbours find great home-cooked food.</div>
        <div style={{ background: C.greenBg, borderRadius: 14, padding: "10px 20px", marginBottom: 28, border: "1px solid " + C.greenBorder }}>
          <span style={{ fontSize: 13, fontWeight: 800, color: C.green }}>{"üíö RM " + creditEarned.toFixed(2) + " added to your wallet for container return"}</span>
        </div>
        <Btn onClick={onDone} variant="primary">Back to Discover</Btn>
      </div>
    );
  }

  return (
    <div style={{ padding: "20px 20px 60px" }}>
      <div style={{ fontFamily: font.heading, fontSize: 22, color: C.dark, marginBottom: 4 }}>How was your meal?</div>
      <div style={{ fontSize: 13, color: C.light, marginBottom: 24 }}>{"From " + order.cookName}</div>

      {/* Star rating */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "20px", marginBottom: 14, textAlign: "center" }}>
        <div style={{ fontSize: 12, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 12 }}>OVERALL RATING</div>
        <div style={{ display: "flex", justifyContent: "center", gap: 8, marginBottom: 10 }}>
          {[1, 2, 3, 4, 5].map(i => (
            <button key={i} onClick={() => setStars(i)} style={{ background: "none", border: "none", fontSize: 36, cursor: "pointer", color: i <= stars ? C.brand : "#E7E5E4", transition: "transform 0.1s", transform: i <= stars ? "scale(1.1)" : "scale(1)" }}>‚òÖ</button>
          ))}
        </div>
        <div style={{ fontSize: 13, color: C.mid, fontWeight: 600 }}>
          {stars === 0 ? "Tap to rate" : stars === 5 ? "Exceptional! ü§©" : stars === 4 ? "Really good! üòä" : stars === 3 ? "It was okay üôÇ" : stars === 2 ? "Needs improvement üòï" : "Not happy üòû"}
        </div>
      </div>

      {/* Written review */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "14px", marginBottom: 14 }}>
        <div style={{ fontSize: 12, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 8 }}>YOUR REVIEW (optional)</div>
        <textarea value={text} onChange={e => setText(e.target.value)} placeholder="Tell your neighbours what you thought of the food‚Ä¶" rows={3} style={{ width: "100%", border: "1.5px solid " + C.border, borderRadius: 10, padding: "10px 12px", fontSize: 13, color: C.dark, background: C.surface, resize: "none", boxSizing: "border-box", fontFamily: font.body }} />
      </div>

      {/* Food matched photo */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "14px", marginBottom: 14 }}>
        <div style={{ fontSize: 12, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>DID THE FOOD MATCH THE MENU PHOTO?</div>
        <div style={{ display: "flex", gap: 10 }}>
          {[{ v: true, label: "Yes, matched well" }, { v: false, label: "Not really" }].map(opt => (
            <button key={String(opt.v)} onClick={() => setMatchesPhoto(opt.v)} style={{ flex: 1, background: matchesPhoto === opt.v ? C.brandLight : "transparent", border: "1.5px solid " + (matchesPhoto === opt.v ? C.brand : C.border), borderRadius: 12, padding: "10px", fontSize: 12, fontWeight: 700, color: matchesPhoto === opt.v ? C.brand : C.mid, cursor: "pointer" }}>
              {opt.label}
            </button>
          ))}
        </div>
      </div>

      {/* Dietary accuracy ‚Äî only if cook has tags */}
      <div style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "14px", marginBottom: 24 }}>
        <div style={{ fontSize: 12, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>WAS THE DIETARY CLAIM ACCURATE?</div>
        <div style={{ fontSize: 12, color: C.mid, marginBottom: 10 }}>e.g. If Diabetic-Friendly was claimed, was the food actually low in sugar/salt?</div>
        <div style={{ display: "flex", gap: 10 }}>
          {[{ v: true, label: "Yes, accurate ‚úì" }, { v: false, label: "No, inaccurate ‚úó" }, { v: null, label: "Not sure" }].map(opt => (
            <button key={String(opt.v)} onClick={() => setDietaryAccurate(opt.v)} style={{ flex: 1, background: dietaryAccurate === opt.v ? C.brandLight : "transparent", border: "1.5px solid " + (dietaryAccurate === opt.v ? C.brand : C.border), borderRadius: 12, padding: "10px 6px", fontSize: 11, fontWeight: 700, color: dietaryAccurate === opt.v ? C.brand : C.mid, cursor: "pointer" }}>
              {opt.label}
            </button>
          ))}
        </div>
      </div>

      <Btn onClick={() => { if (stars > 0) setSubmitted(true); }} variant={stars > 0 ? "primary" : "secondary"}>
        {stars > 0 ? "Submit Review" : "Please give a star rating first"}
      </Btn>
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ COOK PROFILE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const CookProfile = ({ cook, onBack, isSaved, onSave, cart, onAdd, onRemove, onCheckout }) => {
  const itemCount = cart.reduce((s, i) => s + i.qty, 0);
  const total = cart.reduce((s, i) => s + i.price * i.qty, 0);

  return (
    <div style={{ paddingBottom: itemCount > 0 ? 90 : 20 }}>
      {/* Hero */}
      <div style={{ background: "linear-gradient(160deg, #1C1917, #2D2420)", padding: "16px 20px 24px" }}>
        <button onClick={onBack} style={{ background: "rgba(255,255,255,0.1)", border: "none", color: "#fff", padding: "7px 16px", borderRadius: 20, cursor: "pointer", fontSize: 13, fontWeight: 700, marginBottom: 18, fontFamily: font.body }}>‚Üê Back</button>
        <div style={{ display: "flex", gap: 14, alignItems: "flex-start" }}>
          <div style={{ fontSize: 52, background: "rgba(255,255,255,0.07)", borderRadius: 18, width: 72, height: 72, display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>{cook.avatar}</div>
          <div style={{ flex: 1 }}>
            <div style={{ fontFamily: font.heading, fontSize: 22, color: "#fff" }}>{cook.name}</div>
            <div style={{ fontSize: 12, color: "#A8A29E", marginTop: 2 }}>{cook.cuisine}</div>
            <div style={{ fontSize: 12, color: "#78716C", marginTop: 3 }}>{"üìç " + cook.zone + "  ¬∑  " + cook.distanceKm + " km  ¬∑  üõµ " + cook.eta}</div>
            <div style={{ display: "flex", alignItems: "center", gap: 8, marginTop: 7 }}>
              <Stars n={cook.rating} size={14} />
              <span style={{ fontSize: 14, fontWeight: 900, color: C.brand }}>{cook.rating}</span>
              <span style={{ fontSize: 12, color: "#78716C" }}>{"(" + cook.reviews + " reviews)"}</span>
            </div>
          </div>
          <button onClick={() => onSave(cook.id, cook.name)} style={{ background: "rgba(255,255,255,0.1)", border: "none", padding: "10px 12px", borderRadius: 14, cursor: "pointer", fontSize: 20 }}>
            {isSaved ? "‚≠ê" : "‚òÜ"}
          </button>
        </div>
      </div>

      <div style={{ padding: "16px 20px" }}>
        {/* Badges */}
        <div style={{ display: "flex", gap: 7, flexWrap: "wrap", marginBottom: 14 }}>
          {cook.available ? <Tag label="‚óè Taking orders ‚Äî close at 11 AM" color={C.green} bg={C.greenBg} border={C.greenBorder} /> : <Tag label="Resting Today ‚Äî back tomorrow" color={C.mid} bg="#F5F5F4" border={C.border} />}
          {cook.isTrending && <Tag label="üî• Trending" color="#92400E" bg="#FEF3C7" border="#FCD34D" />}
          {cook.isNew && <Tag label="‚ú® New" color="#5B21B6" bg="#EDE9FE" border="#C4B5FD" />}
          {cook.streak >= 30 && <Tag label={"üî• " + cook.streak + "d Streak"} color={C.green} bg={C.greenBg} border={C.greenBorder} />}
        </div>

        {/* Verified */}
        <div style={{ background: C.greenBg, borderRadius: 14, padding: "10px 14px", marginBottom: 14, display: "flex", gap: 10, alignItems: "center", border: "1px solid " + C.greenBorder }}>
          <span style={{ fontSize: 18 }}>‚úÖ</span>
          <div>
            <div style={{ fontWeight: 800, fontSize: 13, color: C.green }}>Verified Mealshare Cook</div>
            <div style={{ fontSize: 11, color: "#4ADE80" }}>FoSIM certified ¬∑ Kitchen inspected ¬∑ Test meal passed</div>
          </div>
        </div>

        {/* Story */}
        <div style={{ background: C.brandLight, borderRadius: 16, padding: "13px 16px", marginBottom: 14, borderLeft: "4px solid " + C.brand }}>
          <div style={{ fontSize: 10, fontWeight: 800, color: C.brand, marginBottom: 5, letterSpacing: 1.5 }}>COOK'S STORY</div>
          <div style={{ fontSize: 14, color: C.dark, lineHeight: 1.65, fontStyle: "italic" }}>{'"' + cook.story + '"'}</div>
        </div>

        {/* Dietary */}
        <div style={{ marginBottom: 14 }}>
          <div style={{ fontSize: 10, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 7 }}>DIETARY SPECIALITIES (COMMUNITY VERIFIED)</div>
          <div style={{ display: "flex", gap: 7, flexWrap: "wrap" }}>
            {cook.tags.map(t => <Tag key={t} label={"‚úì " + t} />)}
          </div>
        </div>

        {/* Neighbour proof */}
        <div style={{ background: C.blueBg, borderRadius: 14, padding: "12px 14px", marginBottom: 16, display: "flex", gap: 12, alignItems: "center", border: "1px solid " + C.blueBorder }}>
          <span style={{ fontSize: 24 }}>üèòÔ∏è</span>
          <div>
            <div style={{ fontSize: 14, fontWeight: 800, color: C.blue }}>{cook.ordersThisWeek + " neighbours ordered this week"}</div>
            <div style={{ fontSize: 12, color: "#60A5FA" }}>{"From " + cook.zone + " and surrounding streets"}</div>
          </div>
        </div>

        {/* ORDER BUILDER */}
        {cook.available && (
          <>
            <div style={{ fontSize: 10, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 10 }}>TODAY'S MENU ‚Äî TAP TO ADD</div>
            <OrderBuilder cook={cook} cart={cart} onAdd={onAdd} onRemove={onRemove} />
          </>
        )}

        {/* Reviews */}
        {cook.reviewsList.length > 0 && (
          <div style={{ marginTop: 20 }}>
            <div style={{ fontSize: 10, fontWeight: 800, color: C.light, letterSpacing: 1.5, marginBottom: 8 }}>NEIGHBOUR REVIEWS</div>
            {cook.reviewsList.map((r, i) => (
              <div key={i} style={{ background: C.card, borderRadius: 13, padding: "11px 14px", marginBottom: 7, border: "1px solid " + C.border }}>
                <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 4 }}>
                  <span style={{ fontWeight: 700, fontSize: 13, color: C.dark }}>{r.name}</span>
                  <Stars n={r.stars} size={12} />
                </div>
                <div style={{ fontSize: 13, color: C.mid, lineHeight: 1.5 }}>{"\"" + r.text + "\""}</div>
              </div>
            ))}
          </div>
        )}

        {!cook.available && (
          <Btn onClick={() => onSave(cook.id, cook.name)} variant="secondary" style={{ marginTop: 16 }}>
            {isSaved ? "‚≠ê Saved ‚Äî notify me when available" : "‚òÜ Save and Notify Me When Back"}
          </Btn>
        )}
      </div>

      {/* Sticky checkout bar */}
      {itemCount > 0 && (
        <div style={{ position: "fixed", bottom: 0, left: "50%", transform: "translateX(-50%)", width: "100%", maxWidth: 430, padding: "12px 20px 24px", background: "linear-gradient(to top, " + C.surface + " 80%, transparent)", zIndex: 300 }}>
          <button onClick={onCheckout} style={{ width: "100%", background: C.brand, border: "none", borderRadius: 18, padding: "16px 24px", display: "flex", justifyContent: "space-between", alignItems: "center", cursor: "pointer", boxShadow: "0 4px 24px rgba(212,80,10,0.35)", fontFamily: font.body }}>
            <div style={{ display: "flex", gap: 10, alignItems: "center" }}>
              <div style={{ background: "rgba(255,255,255,0.2)", borderRadius: 8, padding: "3px 10px", fontSize: 13, fontWeight: 800, color: "#fff" }}>{itemCount}</div>
              <span style={{ fontSize: 14, fontWeight: 800, color: "#fff" }}>View Order</span>
            </div>
            <span style={{ fontSize: 16, fontWeight: 900, color: "#fff", fontFamily: font.heading }}>{"RM " + total.toFixed(2)}</span>
          </button>
        </div>
      )}
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ ORDERS HISTORY TAB ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const OrdersTab = ({ activeOrder, onTrack }) => {
  const past = [
    { id: 1001, cook: "Uncle Chong", dish: "Char Kway Teow + Lotus Root Soup", date: "Yesterday", price: "RM 13.00", stars: 5, reviewed: true },
    { id: 1002, cook: "Kak Rohani", dish: "Masak Lemak + Sup Tulang", date: "3 days ago", price: "RM 11.50", stars: 5, reviewed: true },
    { id: 1003, cook: "Pn. Selvam", dish: "Banana Leaf Thali", date: "5 days ago", price: "RM 14.50", stars: 4, reviewed: false },
  ];
  const steps = ["Confirmed", "Preparing", "Picked Up", "On the Way", "Delivered"];
  return (
    <div style={{ padding: "16px 16px 100px" }}>
      {activeOrder && (
        <div style={{ background: C.card, borderRadius: 20, border: "1.5px solid #FDDCC4", padding: 18, marginBottom: 16, cursor: "pointer" }} onClick={onTrack}>
          <div style={{ fontSize: 10, fontWeight: 800, color: C.brand, letterSpacing: 1.5, marginBottom: 10 }}>ACTIVE ORDER</div>
          <div style={{ display: "flex", gap: 12, alignItems: "center", marginBottom: 14 }}>
            <span style={{ fontSize: 32 }}>{activeOrder.cook.avatar}</span>
            <div style={{ flex: 1 }}>
              <div style={{ fontWeight: 800, fontSize: 15, color: C.dark }}>{activeOrder.cook.name}</div>
              <div style={{ fontSize: 12, color: C.light }}>{activeOrder.cart.map(i => i.qty + "√ó " + i.name).join(", ")}</div>
              <div style={{ fontSize: 12, color: C.brand, fontWeight: 700, marginTop: 3 }}>{"üõµ On the way ¬∑ " + activeOrder.eta}</div>
            </div>
            <div style={{ fontSize: 15, fontWeight: 900, color: C.dark }}>{"RM " + activeOrder.total.toFixed(2)}</div>
          </div>
          <div style={{ display: "flex", justifyContent: "space-between" }}>
            {steps.map((s, i) => (
              <div key={i} style={{ textAlign: "center", flex: 1 }}>
                <div style={{ fontSize: 13, color: i < 4 ? C.brand : C.border }}>{"‚óè"}</div>
                <div style={{ fontSize: 8, color: i < 4 ? C.mid : C.light, marginTop: 2, fontWeight: 700 }}>{s}</div>
              </div>
            ))}
          </div>
        </div>
      )}
      <div style={{ fontSize: 12, fontWeight: 800, color: C.dark, marginBottom: 12 }}>Order History</div>
      {past.map(o => (
        <div key={o.id} style={{ background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: "14px 16px", marginBottom: 10 }}>
          <div style={{ display: "flex", alignItems: "flex-start", gap: 12 }}>
            <div style={{ flex: 1 }}>
              <div style={{ fontWeight: 800, fontSize: 14, color: C.dark }}>{o.cook}</div>
              <div style={{ fontSize: 12, color: C.light, marginTop: 2 }}>{o.dish}</div>
              <div style={{ fontSize: 11, color: C.light, marginTop: 2 }}>{o.date}</div>
            </div>
            <div style={{ textAlign: "right" }}>
              <div style={{ fontWeight: 900, color: C.dark, fontSize: 14 }}>{o.price}</div>
              <Stars n={o.stars} size={11} />
            </div>
          </div>
          {!o.reviewed && (
            <div style={{ marginTop: 10 }}>
              <Btn variant="secondary" onClick={() => {}}>Leave a Review</Btn>
            </div>
          )}
        </div>
      ))}
    </div>
  );
};

// ‚îÄ‚îÄ‚îÄ MAIN APP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      const CookDashboard = ({ onBack }) => (
  <div style={{ padding: "20px", background: "#fff", minHeight: "100vh" }}>
    <button onClick={onBack} style={{ marginBottom: "20px" }}>‚Üê Back to App</button>
    <h2 style={{ fontFamily: "Georgia" }}>Cook Dashboard</h2>
    <div style={{ background: "#DCFCE7", padding: "15px", borderRadius: "12px", marginBottom: "15px" }}>
      <strong>Active Orders (3)</strong>
      <p style={{ fontSize: "13px" }}>Next Batch Pickup: 6:00 PM</p>
    </div>
    <div style={{ border: "1px solid #ddd", borderRadius: "12px", padding: "15px" }}>
      <p><strong>Order #1024</strong> - 2x Masak Lemak</p>
      <p style={{ fontSize: "12px", color: "#666" }}>Delivery to: Lobby, Meru Heights Condominium</p>
      <button style={{ background: "#15803D", color: "#fff", border: "none", padding: "8px 12px", borderRadius: "8px" }}>Mark Ready</button>
    </div>
  </div>
);
export default function MealshareApp() {
  const [neighbourhood, setNeighbourhood] = useState(null);
  const [showZonePicker, setShowZonePicker] = useState(false);
  const [tab, setTab] = useState("home");
  const [dietary, setDietary] = useState("All");
  const [sortBy, setSortBy] = useState("Distance");
  const [availableOnly, setAvailableOnly] = useState(true);

  // Navigation stack
  const [screen, setScreen] = useState("feed"); // feed | profile | checkout | tracking | review
  const [selectedCook, setSelectedCook] = useState(null);
  const [cart, setCart] = useState([]);
  const [activeOrder, setActiveOrder] = useState(null);

  const [saved, setSaved] = useState([2]);
  const [walletCredit] = useState(3.00);
  const [toast, setToast] = useState(null);

  const showToast = msg => { setToast(msg); setTimeout(() => setToast(null), 2500); };
  const toggleSave = (id, name) => {
    if (saved.includes(id)) { setSaved(saved.filter(s => s !== id)); showToast("Removed " + name); }
    else { setSaved([...saved, id]); showToast(name + " saved ‚≠ê"); }
  };

  const addToCart = dish => {
    setCart(prev => {
      const existing = prev.find(i => i.id === dish.id);
      if (existing) return prev.map(i => i.id === dish.id ? { ...i, qty: i.qty + 1 } : i);
      return [...prev, { ...dish, qty: 1 }];
    });
  };

  const removeFromCart = dish => {
    setCart(prev => {
      const existing = prev.find(i => i.id === dish.id);
      if (!existing || existing.qty <= 1) return prev.filter(i => i.id !== dish.id);
      return prev.map(i => i.id === dish.id ? { ...i, qty: i.qty - 1 } : i);
    });
  };

  const handlePaymentSuccess = () => {
    const itemTotal = cart.reduce((s, i) => s + i.price * i.qty, 0);
    setActiveOrder({
      id: Math.floor(Math.random() * 9000) + 1000,
      cook: selectedCook,
      cart: [...cart],
      total: itemTotal + 3.5,
      eta: selectedCook.eta,
      cookName: selectedCook.name,
    });
    setCart([]);
    setScreen("tracking");
    setTab("orders");
  };

  const sortFn = (a, b) => {
    if (sortBy === "Distance") return a.distanceKm - b.distanceKm;
    if (sortBy === "Rating") return b.rating - a.rating;
    return (b.isNew ? 1 : 0) - (a.isNew ? 1 : 0);
  };

  const filtered = COOKS.filter(c => {
    if (dietary !== "All" && !c.tags.includes(dietary)) return false;
    if (availableOnly && !c.available) return false;
    return true;
  }).sort(sortFn);

  const newCooks = COOKS.filter(c => c.isNew && c.available);
  const savedCooks = COOKS.filter(c => saved.includes(c.id));

  const TABS = [
    { id: "home", icon: "üè†", label: "Discover" },
    { id: "orders", icon: "üìã", label: activeOrder ? "Orders ‚óè" : "Orders" },
    { id: "saved", icon: "‚≠ê", label: saved.length > 0 ? "Saved (" + saved.length + ")" : "Saved" },
  ];

  if (!neighbourhood) return <ZonePicker onSelect={n => setNeighbourhood(n)} />;

  // ‚îÄ‚îÄ FULL-SCREEN FLOWS ‚îÄ‚îÄ
  if (screen === "profile" && selectedCook) {
    return (
      <div style={{ fontFamily: font.body, background: C.surface, minHeight: "100vh", maxWidth: 430, margin: "0 auto", boxShadow: "0 0 50px rgba(0,0,0,0.1)", overflowY: "auto" }}>
        {toast && <div style={{ position: "fixed", top: 16, left: "50%", transform: "translateX(-50%)", background: C.dark, color: "#fff", padding: "10px 22px", borderRadius: 24, fontSize: 13, fontWeight: 700, zIndex: 9999, whiteSpace: "nowrap", pointerEvents: "none" }}>{toast}</div>}
        <CookProfile cook={selectedCook} onBack={() => { setScreen("feed"); setCart([]); }} isSaved={saved.includes(selectedCook.id)} onSave={toggleSave} cart={cart} onAdd={addToCart} onRemove={removeFromCart} onCheckout={() => setScreen("checkout")} />
      </div>
    );
  }

  if (screen === "checkout" && selectedCook) {
    return (
      <div style={{ fontFamily: font.body, background: C.surface, minHeight: "100vh", maxWidth: 430, margin: "0 auto", boxShadow: "0 0 50px rgba(0,0,0,0.1)", overflowY: "auto" }}>
        {toast && <div style={{ position: "fixed", top: 16, left: "50%", transform: "translateX(-50%)", background: C.dark, color: "#fff", padding: "10px 22px", borderRadius: 24, fontSize: 13, fontWeight: 700, zIndex: 9999, whiteSpace: "nowrap", pointerEvents: "none" }}>{toast}</div>}
        <Checkout cook={selectedCook} cart={cart} walletCredit={walletCredit} onBack={() => setScreen("profile")} onPaymentSuccess={handlePaymentSuccess} />
      </div>
    );
  }

  if (screen === "tracking" && activeOrder) {
    return (
      <div style={{ fontFamily: font.body, background: C.surface, minHeight: "100vh", maxWidth: 430, margin: "0 auto", boxShadow: "0 0 50px rgba(0,0,0,0.1)", overflowY: "auto" }}>
        <div style={{ background: "linear-gradient(135deg, #1C1917, #2D2420)", padding: "20px 20px 16px" }}>
          <div style={{ fontSize: 10, color: C.brandMid, fontWeight: 900, letterSpacing: 3, textTransform: "uppercase", marginBottom: 2 }}>Mealshare</div>
          <div style={{ fontFamily: font.heading, fontSize: 18, color: "#fff" }}>Live Tracking</div>
        </div>
        <TrackingScreen order={activeOrder} onReviewReady={() => setScreen("review")} />
      </div>
    );
  }

  if (screen === "review" && activeOrder) {
    return (
      <div style={{ fontFamily: font.body, background: C.surface, minHeight: "100vh", maxWidth: 430, margin: "0 auto", boxShadow: "0 0 50px rgba(0,0,0,0.1)", overflowY: "auto" }}>
        <div style={{ background: "linear-gradient(135deg, #1C1917, #2D2420)", padding: "20px 20px 16px" }}>
          <div style={{ fontSize: 10, color: C.brandMid, fontWeight: 900, letterSpacing: 3, textTransform: "uppercase", marginBottom: 2 }}>Mealshare</div>
          <div style={{ fontFamily: font.heading, fontSize: 18, color: "#fff" }}>Rate Your Meal</div>
        </div>
        <ReviewScreen order={activeOrder} onDone={() => { setScreen("feed"); setActiveOrder(null); setTab("home"); }} />
      </div>
    );
  }

  // ‚îÄ‚îÄ MAIN TABBED SHELL ‚îÄ‚îÄ
  return (
    <div style={{ fontFamily: font.body, background: C.surface, minHeight: "100vh", maxWidth: 430, margin: "0 auto", position: "relative", boxShadow: "0 0 50px rgba(0,0,0,0.1)" }}>
      {showZonePicker && <ZonePicker onSelect={n => { setNeighbourhood(n); setShowZonePicker(false); showToast("Switched to " + n); }} />}
      {toast && <div style={{ position: "fixed", top: 16, left: "50%", transform: "translateX(-50%)", background: C.dark, color: "#fff", padding: "10px 22px", borderRadius: 24, fontSize: 13, fontWeight: 700, zIndex: 9999, whiteSpace: "nowrap", boxShadow: "0 4px 24px rgba(0,0,0,0.25)", pointerEvents: "none" }}>{toast}</div>}

      {/* Header */}
      <div style={{ background: "linear-gradient(135deg, #1C1917, #2D2420)", padding: "18px 18px 14px", position: "sticky", top: 0, zIndex: 100 }}>
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: tab === "home" ? 12 : 0 }}>
          <div>
            <div style={{ fontSize: 10, color: C.brandMid, fontWeight: 900, letterSpacing: 3, textTransform: "uppercase" }}>Mealshare</div>
            <div style={{ fontFamily: font.heading, fontSize: 20, color: "#fff" }}>
              {tab === "saved" ? "Saved Cooks" : tab === "orders" ? "My Orders" : "Home Cooks Near You"}
            </div>
            <button onClick={() => setShowZonePicker(true)} style={{ background: "none", border: "none", padding: 0, cursor: "pointer", display: "flex", alignItems: "center", gap: 5, marginTop: 3 }}>
              <span style={{ fontSize: 11, color: "#60A5FA" }}>{"üìç " + neighbourhood}</span>
              <span style={{ fontSize: 10, color: C.light, background: "rgba(255,255,255,0.1)", borderRadius: 10, padding: "1px 7px" }}>change</span>
            </button>
          </div>
          {tab === "home" && (
            <div style={{ display: "flex", gap: 5, flexShrink: 0 }}>
              {SORT_OPTIONS.map(s => (
                <button key={s} onClick={() => setSortBy(s)} style={{ padding: "5px 9px", borderRadius: 12, border: "none", cursor: "pointer", fontWeight: 700, fontSize: 10, background: sortBy === s ? C.brand : "rgba(255,255,255,0.12)", color: "#fff", fontFamily: font.body }}>
                  {s}
                </button>
              ))}
            </div>
          )}
        </div>

        {tab === "home" && (
          <>
            <div style={{ overflowX: "auto", display: "flex", gap: 7, paddingBottom: 4, marginBottom: 8, scrollbarWidth: "none" }}>
              {DIETARY_FILTERS.map(f => (
                <button key={f} onClick={() => setDietary(f)} style={{ flexShrink: 0, padding: "5px 13px", borderRadius: 18, border: dietary === f ? "none" : "1.5px solid rgba(255,255,255,0.15)", background: dietary === f ? C.brand : "transparent", color: dietary === f ? "#fff" : C.light, fontSize: 11, fontWeight: 700, cursor: "pointer", whiteSpace: "nowrap", fontFamily: font.body }}>
                  {f}
                </button>
              ))}
            </div>
            <div style={{ display: "flex", gap: 8, alignItems: "center" }}>
              <button onClick={() => setAvailableOnly(!availableOnly)} style={{ padding: "5px 13px", borderRadius: 18, border: "1.5px solid", borderColor: availableOnly ? "#22C55E" : "rgba(255,255,255,0.2)", background: availableOnly ? "rgba(34,197,94,0.14)" : "transparent", color: availableOnly ? "#22C55E" : C.light, fontSize: 11, fontWeight: 700, cursor: "pointer", fontFamily: font.body }}>
                {availableOnly ? "‚óè Available Now" : "‚óã Show All"}
              </button>
              <span style={{ fontSize: 11, color: "#57534E" }}>{filtered.length + " cook" + (filtered.length !== 1 ? "s" : "") + " ¬∑ " + sortBy.toLowerCase()}</span>
            </div>
          </>
        )}
      </div>

      {/* Home Feed */}
      {tab === "home" && (
        <div style={{ padding: "16px 16px 100px" }}>
          {newCooks.length > 0 && dietary === "All" && (
            <div style={{ marginBottom: 20 }}>
              <div style={{ fontSize: 12, fontWeight: 800, color: C.dark, marginBottom: 10, display: "flex", alignItems: "center", gap: 7 }}>
                <span style={{ background: "#EDE9FE", color: "#5B21B6", padding: "2px 9px", borderRadius: 20, fontSize: 10, fontWeight: 800 }}>NEW</span>
                Just joined your neighbourhood
              </div>
              <div style={{ overflowX: "auto", display: "flex", gap: 10, paddingBottom: 4, scrollbarWidth: "none" }}>
                {newCooks.map(c => (
                  <button key={c.id} onClick={() => { setSelectedCook(c); setCart([]); setScreen("profile"); }} style={{ flexShrink: 0, width: 136, background: C.card, borderRadius: 16, border: "1px solid " + C.border, padding: 12, cursor: "pointer", textAlign: "left", display: "block", boxShadow: "0 2px 12px rgba(0,0,0,0.05)" }}>
                    <div style={{ fontSize: 32, marginBottom: 6 }}>{c.avatar}</div>
                    <div style={{ fontFamily: font.heading, fontSize: 13, color: C.dark, marginBottom: 3 }}>{c.name}</div>
                    <div style={{ fontSize: 10, color: C.light, marginBottom: 7 }}>{c.distanceKm + " km ¬∑ ‚òÖ " + c.rating}</div>
                    <Tag label="‚ú® New Cook" color="#5B21B6" bg="#EDE9FE" border="#C4B5FD" />
                  </button>
                ))}
              </div>
            </div>
          )}

          {filtered.length === 0 ? (
            <div style={{ textAlign: "center", padding: "60px 20px", color: C.light }}>
              <div style={{ fontSize: 40, marginBottom: 12 }}>üîç</div>
              <div style={{ fontWeight: 700, fontSize: 15, color: C.mid }}>No cooks match this filter</div>
              <div style={{ fontSize: 13, marginTop: 6 }}>Try removing a filter or tap Show All</div>
            </div>
          ) : filtered.map(c => (
            <CookCard key={c.id} cook={c} onTap={cook => { setSelectedCook(cook); setCart([]); setScreen("profile"); }} isSaved={saved.includes(c.id)} onSave={toggleSave} />
          ))}
        </div>
      )}

      {/* Orders Tab */}
      {tab === "orders" && (
        <OrdersTab activeOrder={activeOrder} onTrack={() => { if (activeOrder) setScreen("tracking"); }} />
      )}

      {/* Saved Tab */}
      {tab === "saved" && (
        <div style={{ padding: "16px 16px 100px" }}>
          {savedCooks.length === 0 ? (
            <div style={{ textAlign: "center", padding: "60px 20px", color: C.light }}>
              <div style={{ fontSize: 40, marginBottom: 12 }}>‚òÜ</div>
              <div style={{ fontWeight: 700, fontSize: 15, color: C.mid }}>No saved cooks yet</div>
              <div style={{ fontSize: 13, marginTop: 6 }}>Tap the star on any cook to save them</div>
            </div>
          ) : savedCooks.map(c => (
            <CookCard key={c.id} cook={c} onTap={cook => { setSelectedCook(cook); setCart([]); setScreen("profile"); }} isSaved={true} onSave={toggleSave} />
          ))}
        </div>
      )}

      {/* Bottom Nav */}
      <div style={{ position: "fixed", bottom: 0, left: "50%", transform: "translateX(-50%)", width: 430, background: C.card, borderTop: "1px solid " + C.border, display: "grid", gridTemplateColumns: "repeat(3, 1fr)", padding: "10px 0 16px", zIndex: 200, boxShadow: "0 -4px 20px rgba(0,0,0,0.07)" }}>
        {TABS.map(t => (
          <button key={t.id} onClick={() => setTab(t.id)} style={{ background: "none", border: "none", cursor: "pointer", display: "flex", flexDirection: "column", alignItems: "center", gap: 3, padding: 0, fontFamily: font.body }}>
            <span style={{ fontSize: 22 }}>{t.icon}</span>
            <span style={{ fontSize: 10, fontWeight: 700, color: tab === t.id ? C.brand : C.light }}>{t.label}</span>
            {tab === t.id && <div style={{ width: 18, height: 2.5, background: C.brand, borderRadius: 2 }} />}
          </button>
        ))}
      </div>
    </div>
  );
}

        // PASTE YOUR JSX CODE ABOVE THIS LINE
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MealshareApp />);
    </script>
</body>
</html>
